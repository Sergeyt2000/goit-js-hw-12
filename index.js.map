{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.png","../src/main.js"],"sourcesContent":["import { refs } from '../main';\n\nexport function renderMarkup(images) {\n  const markup = images\n      .map(image => {\n        const {\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        } = image;\n        return `<li class=\"gallery-item\">\n      <div>\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\" \n            title=\"${tags.slice(0, 30)}\"\n            width=\"360\"\n            height=\"152\"\n          />\n          </a>\n          <div class=\"img-descr\">\n            <ul class=\"list-descr\">\n              <li class=\"item-descr\">\n                <p class=\"descr-name\">Likes</p>\n                <p class=\"descr-value\">${likes}</p>\n              </li>\n              <li class=\"item-descr\">\n                <p class=\"descr-name\">Views</p>\n                <p class=\"descr-value\">${views}</p>\n              </li>\n              <li class=\"item-descr\">\n                <p class=\"descr-name\">Comments</p>\n                <p class=\"descr-value\">${comments}</p>\n              </li>\n              <li class=\"item-descr\">\n                <p class=\"descr-name\">Downloads</p>\n                <p class=\"descr-value\">${downloads}</p>\n              </li>\n            </ul>          \n          </div>\n          </div>\n      </li>\n      `;\n      })\n      .join('');\n  refs.galleryEl.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from 'axios';\n\nconst myApiKey = '49287257-770ce306313139aeab99da771';\nconst url = 'https://pixabay.com/api/';\n\nexport async function fetchData(searchQuery, currentPage) {\n  try {\n    const respData = await axios.get(url, {\n      params: {\n        key: myApiKey,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page: currentPage,\n      },\n    });\n    return respData.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEaSURBVHgBrZZhDoIwDIUL0fjXo3gUb7R5Er0BHsXD7A+bASlhYeC6V4WXGCHr3reNtkAkqG2D9T70mh/HSj4HybyqyPQ9PeuaXlRQ19GFY4c5dDodLSHNK3/fSam29Q+0k7/N1ZAt5hCyh7kIKZl77y/IMBezgEwXTW4ienBxcc65DCQ0PDYCQghGMDASJJpzTG4ue0KABEHmKeBAQEPx3LiIhmKy/M+aitDyGJoPAWsI32vNWTXpVQnXRal2kPQmO7pPx6XpPRCQmsdjSZ8JhIA0FbOllMKsRZqCQoMpXCy0GJRrFc7hVpGLSVqFWaxk52ZnVgPbIaL5HhBovgVSMv+qg7kt9JznZ+VL//pL+5hWFXei+mwRj+UDSHQ9vnHBEYAAAAAASUVORK5CYII=\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderMarkup } from './js/render-functions';\nimport { fetchData } from './js/pixabay-api';\nimport errorIcon from '/img/error.png';\n\nexport const refs = {\n  formEl: document.querySelector('.form'),\n  galleryEl: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  searchInput: document.querySelector('.form-input'),\n  moreBtnEl: document.querySelector('.more-btn'),\n};\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'title',\n  captionDelay: 250,\n  scrollZoom: false,\n});\nexport let searchQuery = '';\nlet totalPages = 0;\nlet currentPage = 1;\n\nrefs.formEl.addEventListener('submit', onSubmit);\nrefs.moreBtnEl.addEventListener('click', onLoadMore);\n\nasync function onSubmit(evt) {\n  evt.preventDefault();\n  currentPage = 1;\n  searchQuery = refs.searchInput.value;\n  if (searchQuery.trim() === '') {\n    refs.galleryEl.innerHTML = '';\n    refs.moreBtnEl.classList.add('visually-hidden');\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Please enter something',\n    });\n    return;\n  }\n  refs.moreBtnEl.classList.add('visually-hidden');\n  refs.loaderEl.classList.remove('visually-hidden');\n  refs.galleryEl.innerHTML = '';\n  try {\n    const data = await fetchData(searchQuery, currentPage);\n    totalPages = Math.ceil(data.totalHits / data.hits.length);\n    if (data.hits.length === 0) {\n      refs.loaderEl.classList.add('visually-hidden');\n      refs.formEl.reset();\n      iziToast.error({\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        iconUrl: errorIcon,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }    \n    renderMarkup(data.hits);\n    if (currentPage >= totalPages) {\n      refs.moreBtnEl.classList.add('visually-hidden');\n      refs.loaderEl.classList.add('visually-hidden');\n      refs.formEl.reset();\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n    refs.moreBtnEl.classList.remove('visually-hidden');\n    gallery.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n  refs.loaderEl.classList.add('visually-hidden');\n  refs.formEl.reset();\n}\n\nasync function onLoadMore() {\n  refs.loaderEl.classList.remove('visually-hidden');\n  currentPage += 1;\n  try {\n    const nextImages = await fetchData(searchQuery, currentPage);\n    renderMarkup(nextImages.hits);\n    gallery.refresh();\n    const galleryItemEl = document.querySelector('.gallery-item');\n    const cardElement = galleryItemEl.getBoundingClientRect();\n    const cardElementHeight = cardElement.height;\n    window.scrollBy({\n      top: cardElementHeight * 2,\n      behavior: 'smooth',\n    });\n    if (currentPage >= totalPages) {\n      refs.moreBtnEl.classList.add('visually-hidden');\n      refs.loaderEl.classList.add('visually-hidden');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n    \n  } catch (error) {\n    console.log(error);\n  }\n  refs.loaderEl.classList.add('visually-hidden');\n}\n"],"names":["renderMarkup","images","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","myApiKey","url","fetchData","searchQuery","currentPage","axios","error","errorIcon","gallery","SimpleLightbox","totalPages","onSubmit","onLoadMore","evt","iziToast","data","nextImages","cardElementHeight"],"mappings":"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"}